!function e(t,n,r){function o(s,i){if(!n[s]){if(!t[s]){var c="function"==typeof require&&require;if(!i&&c)return c(s,!0);if(a)return a(s,!0);var u=new Error("Cannot find module '"+s+"'");throw u.code="MODULE_NOT_FOUND",u}var f=n[s]={exports:{}};t[s][0].call(f.exports,function(e){var n=t[s][1][e];return o(n?n:e)},f,f.exports,e,t,n,r)}return n[s].exports}for(var a="function"==typeof require&&require,s=0;s<r.length;s++)o(r[s]);return o}({1:[function(e,t,n){"use strict";angular.module("chatApp",["btford.socket-io","luegg.directives"]),e("./controllers/SocketController")},{"./controllers/SocketController":2}],2:[function(e,t,n){"use strict";angular.module("chatApp").controller("socketController",["$scope","socketFactory",function(e,t){function n(t){var n=e.participants.map(function(e){return e.name}),r=n.lastIndexOf(t.name)!=-1;return!r&&e.participants.push(t)}var r=new t;e.message="",e.messages=[],e.user,e.participants=[],e.wSocketId="",$("#userModal").modal("show"),e.enterChat=function(){var t=e.participants.map(function(e){return e.name}),n=t.lastIndexOf(e.user)!=-1;n?alert("Name taken!"):(r.emit("new user",e.user),$("#userModal").modal("hide"))},e.sendMessage=function(){var t={message:e.message,sender:e.user,wSocketId:e.wSocketId,date:new Date};r.emit("chat message",t)},e.sendPrivateMessage=function(t,n){e.wSocketId=n,r.emit("get user",n)},r.on("get user",function(t){e.message="/w "+t.name+" ",$("[name='message']").focus()}),r.on("new user",function(e){n(e)}),r.on("chat message",function(t){e.messages.push(t),e.message="",e.wSocketId=""}),r.on("load participants",function(e){for(var t=0;t<e.length;t++)n(e[t])}),r.on("exit chat",function(t){for(var n=e.participants.length-1;n>=0;n-=1)e.participants[n].socketId===t&&e.participants.splice(n,1)})}])},{}]},{},[1]);